# åŒ–å­¦ç‰©è´¨çŒœæµ‹æ¸¸æˆ - é¡¹ç›®æ–‡æ¡£

## ğŸ“– é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯åŸºäºåŸ **anime-character-guessr** é¡¹ç›®é‡æ„è€Œæˆçš„ **åŒ–å­¦ç‰©è´¨çŒœæµ‹æ¸¸æˆ**ã€‚ä¿ç•™äº†åŸé¡¹ç›®çš„å‰åç«¯æ¶æ„ï¼ˆReact + Node.js + Express + MongoDBï¼‰ï¼Œä½†å°†æ‰€æœ‰åŠ¨æ¼«è§’è‰²ç›¸å…³çš„é€»è¾‘ã€æ•°æ®å’ŒUIæ›¿æ¢ä¸ºé«˜ä¸­åŒ–å­¦ç‰©è´¨/ç¦»å­æ ¹/åŒ–åˆç‰©çš„çŒœæµ‹æ¸¸æˆã€‚

## ğŸ® æ¸¸æˆç©æ³•

1. ç³»ç»Ÿéšæœºé€‰æ‹©ä¸€ä¸ªåŒ–å­¦ç‰©è´¨ä½œä¸ºç­”æ¡ˆ
2. ç©å®¶çœ‹åˆ°åˆå§‹æç¤ºï¼ˆç‰©è´¨çš„çŠ¶æ€ï¼šå›ºä½“/æ¶²ä½“/æ°”ä½“ï¼‰
3. ç©å®¶è¾“å…¥åŒ–å­¦å¼æˆ–ä¸­æ–‡åç§°è¿›è¡ŒçŒœæµ‹
4. ç³»ç»Ÿè¿”å›å„é¡¹å±æ€§çš„åŒ¹é…åé¦ˆï¼š
   - **é…¸ç¢±æ€§**ï¼šå¼ºé…¸/å¼±é…¸/å¼ºç¢±/å¼±ç¢±/ä¸­æ€§/ä¸¤æ€§
   - **æ°´è§£/ç”µè§£**ï¼šèƒ½æ°´è§£/ä¸èƒ½æ°´è§£/èƒ½ç”µè§£/ä¸èƒ½ç”µè§£
   - **çŠ¶æ€**ï¼šå›ºä½“ æ™¶ä½“/æ¶²ä½“ æº¶æ¶²/æ°”ä½“
   - **ååº”**ï¼šä¸å…¶ä»–ç‰©è´¨çš„ååº”ï¼ˆæ•°ç»„ï¼‰
   - **å…¶ä»–æ€§è´¨**ï¼šé¢œè‰²ã€ç”¨é€”ã€ç‰¹æ€§ç­‰
5. åé¦ˆé¢œè‰²ï¼š
   - ğŸŸ¢ **ç»¿è‰²** = å®Œå…¨æ­£ç¡®
   - ğŸŸ¡ **é»„è‰²** = éƒ¨åˆ†æ­£ç¡®
   - âšª **ç°è‰²** = é”™è¯¯
6. ç©å®¶æœ‰ 10 æ¬¡çŒœæµ‹æœºä¼š

## ğŸ“ é¡¹ç›®ç»“æ„

```
anime-character-guessr-main/
â”œâ”€â”€ client/                          # å‰ç«¯ (React + Vite)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChemistrySearchBar.jsx      # åŒ–å­¦ç‰©è´¨æœç´¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ChemistryGuessesTable.jsx   # çŒœæµ‹å†å²è¡¨æ ¼ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ ...                         # å…¶ä»–åŸæœ‰ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ ChemistrySinglePlayer.jsx   # åŒ–å­¦æ¸¸æˆå•äººæ¨¡å¼é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ Home.jsx                    # ä¸»é¡µï¼ˆå·²æ›´æ–°ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ...                         # åŸæœ‰é¡µé¢
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ chemistry.js                # åŒ–å­¦æ¸¸æˆå·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â””â”€â”€ ...                         # åŸæœ‰å·¥å…·
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚       â”œâ”€â”€ SearchBar.css               # æœç´¢æ æ ·å¼
â”‚   â”‚       â””â”€â”€ ...                         # å…¶ä»–æ ·å¼
â”‚   â””â”€â”€ ...
â”œâ”€â”€ server/                          # åç«¯ (Node.js + Express)
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ chemistry_questions.json        # åŒ–å­¦é¢˜åº“ (20ä¸ªç¤ºä¾‹)
â”‚   â”œâ”€â”€ seed/
â”‚   â”‚   â””â”€â”€ chemistry_seed.js               # é¢˜åº“åŠ è½½å’Œæ¯”å¯¹é€»è¾‘
â”‚   â”œâ”€â”€ server.js                           # ä¸»æœåŠ¡å™¨æ–‡ä»¶ï¼ˆå·²æ·»åŠ åŒ–å­¦APIï¼‰
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

## ğŸ—‚ï¸ é¢˜åº“æ ¼å¼

### JSON ç»“æ„

é¢˜åº“æ–‡ä»¶ï¼š`server/data/chemistry_questions.json`

```json
[
  {
    "formula": "Na2SO4",
    "name": "ç¡«é…¸é’ ",
    "labels": {
      "acidBase": "ä¸­æ€§",
      "hydrolysisElectrolysis": "ä¸èƒ½æ°´è§£ / èƒ½ç”µè§£",
      "state": "å›ºä½“ æ™¶ä½“",
      "reactions": [
        "ä¸ Ba2+ ååº”ç”Ÿæˆ BaSO4",
        "ä¸çƒ­æµ“ H2SO4 ååº”ç”Ÿæˆ SO3"
      ],
      "other": "å¯æº¶äºæ°´ / å·¥ä¸šç”¨é€” / è„±æ°´å‰‚"
    }
  }
]
```

### å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `formula` | String | åŒ–å­¦å¼ | "H2SO4" |
| `name` | String | ä¸­æ–‡åç§° | "ç¡«é…¸" |
| `labels.acidBase` | String | é…¸ç¢±æ€§ | "å¼ºé…¸" / "å¼±ç¢±æ€§" / "ä¸­æ€§" / "ä¸¤æ€§" |
| `labels.hydrolysisElectrolysis` | String | æ°´è§£/ç”µè§£æ€§è´¨ | "èƒ½æ°´è§£ / èƒ½ç”µè§£" |
| `labels.state` | String | ç‰©è´¨çŠ¶æ€ | "å›ºä½“ æ™¶ä½“" / "æ¶²ä½“ æº¶æ¶²" / "æ°”ä½“" |
| `labels.reactions` | Array | ååº”åˆ—è¡¨ | ["ä¸ NaOH ååº”ç”Ÿæˆ Na2SO4"] |
| `labels.other` | String | å…¶ä»–æ€§è´¨ | "è„±æ°´æ€§ / å¸æ°´æ€§ / å¼ºæ°§åŒ–æ€§" |

### ååº”æ ¼å¼è§„èŒƒ

**é‡è¦**ï¼šæ‰€æœ‰ååº”å¿…é¡»ä¸¥æ ¼éµå¾ªæ ¼å¼ï¼š**"ä¸ X ååº”ç”Ÿæˆ Y"**

- âœ… æ­£ç¡®ï¼š`"ä¸ NaOH ååº”ç”Ÿæˆ NaCl"`
- âœ… æ­£ç¡®ï¼š`"ä¸ O2 ååº”ç”Ÿæˆ SO3"`
- âŒ é”™è¯¯ï¼š`"å’Œ NaOH ç”Ÿæˆ NaCl"` ï¼ˆç¼ºå°‘"ååº”"ï¼‰
- âŒ é”™è¯¯ï¼š`"ä¸ NaOH ååº”å¾—åˆ° NaCl"` ï¼ˆåº”ä¸º"ç”Ÿæˆ"ï¼‰

## ğŸ”Œ API æ¥å£

### 1. è·å–éšæœºé¢˜ç›®

```http
GET /api/chemistry/random
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "formula": "Na2SO4",
  "initialHint": "å›ºä½“ æ™¶ä½“"
}
```

### 2. æäº¤çŒœæµ‹

```http
POST /api/chemistry/guess
Content-Type: application/json

{
  "guessFormula": "CaCO3",
  "answerFormula": "Na2SO4"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "formula": "Na2SO4",
  "name": "ç¡«é…¸é’ ",
  "correctLabels": { ... },
  "guessLabels": { ... },
  "guessName": "ç¢³é…¸é’™",
  "feedback": {
    "acidBase": "wrong",
    "hydrolysisElectrolysis": "partial",
    "state": "correct",
    "reactions": ["wrong", "partial"],
    "reactionsOverall": "partial",
    "other": "wrong"
  },
  "isCorrect": false
}
```

### 3. è·å–æ‰€æœ‰é¢˜ç›®

```http
GET /api/chemistry/all
```

### 4. æœç´¢åŒ–å­¦ç‰©è´¨

```http
GET /api/chemistry/search?q=ç¡«é…¸
```

## ğŸš€ è¿è¡Œæ•™ç¨‹

### æ–¹å¼ä¸€ï¼šæœ¬åœ° npm è¿è¡Œ

#### 1. å®‰è£…ä¾èµ–

```bash
# åç«¯
cd server
npm install

# å‰ç«¯
cd ../client
npm install
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡

åœ¨ `server/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
CLIENT_URL=http://localhost:5173
SERVER_URL=http://localhost:3000
MONGODB_URI=mongodb://localhost:27017/chemistry
PORT=3000
```

#### 3. å¯åŠ¨æœåŠ¡

```bash
# å¯åŠ¨åç«¯ï¼ˆåœ¨ server/ ç›®å½•ï¼‰
npm run dev

# å¯åŠ¨å‰ç«¯ï¼ˆåœ¨ client/ ç›®å½•ï¼Œæ–°ç»ˆç«¯ï¼‰
npm run dev
```

#### 4. è®¿é—®æ¸¸æˆ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5173`

ç‚¹å‡» **"ğŸ§ª çŒœåŒ–å­¦ç‰©è´¨"** æŒ‰é’®å¼€å§‹æ¸¸æˆ

### æ–¹å¼äºŒï¼šDocker è¿è¡Œ

#### 1. é…ç½®ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
DOMAIN_NAME=http://localhost
MONGODB_URI=mongodb://mongo:27017/chemistry
CLIENT_INTERNAL_PORT=80
SERVER_INTERNAL_PORT=3000
NGINX_EXTERNAL_PORT=80
AES_SECRET=YourSuperSecretKeyChangeMe
SERVER_URL=http://localhost:3000
```

#### 2. å¯åŠ¨å®¹å™¨

```bash
docker-compose up --build
```

#### 3. è®¿é—®æ¸¸æˆ

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost`

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•åç«¯ API

```bash
# æµ‹è¯•è·å–éšæœºé¢˜ç›®
curl http://localhost:3000/api/chemistry/random

# æµ‹è¯•æœç´¢
curl "http://localhost:3000/api/chemistry/search?q=ç¡«é…¸"

# æµ‹è¯•çŒœæµ‹
curl -X POST http://localhost:3000/api/chemistry/guess \
  -H "Content-Type: application/json" \
  -d '{"guessFormula":"H2SO4","answerFormula":"Na2SO4"}'
```

### æµ‹è¯•å‰ç«¯

1. è®¿é—® `http://localhost:5173`
2. ç‚¹å‡» "ğŸ§ª çŒœåŒ–å­¦ç‰©è´¨"
3. å°è¯•æœç´¢ "ç¡«é…¸" æˆ–ç›´æ¥è¾“å…¥ "H2SO4"
4. æŸ¥çœ‹åé¦ˆé¢œè‰²æ˜¯å¦æ­£ç¡®

## ğŸ“ æ·»åŠ æ–°é¢˜ç›®

ç¼–è¾‘ `server/data/chemistry_questions.json`ï¼Œæ·»åŠ æ–°çš„åŒ–å­¦ç‰©è´¨æ¡ç›®ï¼š

```json
{
  "formula": "æ–°åŒ–å­¦å¼",
  "name": "æ–°ç‰©è´¨åç§°",
  "labels": {
    "acidBase": "é…¸ç¢±æ€§",
    "hydrolysisElectrolysis": "æ°´è§£/ç”µè§£æ€§è´¨",
    "state": "çŠ¶æ€",
    "reactions": [
      "ä¸ X ååº”ç”Ÿæˆ Y"
    ],
    "other": "å…¶ä»–æ€§è´¨"
  }
}
```

é‡å¯æœåŠ¡å™¨åæ–°é¢˜ç›®å³å¯ç”Ÿæ•ˆã€‚

## ğŸ¨ å‰ç«¯ç»„ä»¶è¯´æ˜

### ChemistrySearchBar
- æ”¯æŒåŒ–å­¦å¼å’Œä¸­æ–‡åç§°æœç´¢
- å®æ—¶æœç´¢å»ºè®®
- é”®ç›˜å¯¼èˆªï¼ˆä¸Šä¸‹ç®­å¤´ã€Enterã€Escï¼‰
- æ”¯æŒç›´æ¥è¾“å…¥åŒ–å­¦å¼

### ChemistryGuessesTable
- æ˜¾ç¤ºçŒœæµ‹å†å²
- é¢œè‰²åé¦ˆï¼ˆç»¿/é»„/ç°ï¼‰
- ååº”åˆ—è¡¨å±•å¼€/æ”¶èµ·
- å“åº”å¼è®¾è®¡

### ChemistrySinglePlayer
- æ¸¸æˆä¸»é¡µé¢
- æ˜¾ç¤ºåˆå§‹æç¤ºå’Œå‰©ä½™æ¬¡æ•°
- å¤„ç†çŒœæµ‹é€»è¾‘
- æ¸¸æˆç»“æŸåˆ¤æ–­

## ğŸ”§ åç«¯é€»è¾‘è¯´æ˜

### chemistry_seed.js

æ ¸å¿ƒå‡½æ•°ï¼š

- `loadChemistryQuestions()` - åŠ è½½é¢˜åº“
- `getRandomQuestion()` - è·å–éšæœºé¢˜ç›®
- `findQuestionByFormula()` - æ ¹æ®åŒ–å­¦å¼æŸ¥æ‰¾
- `compareLabelValue()` - æ¯”è¾ƒæ ‡ç­¾å€¼ï¼ˆè¿”å› correct/partial/wrongï¼‰
- `compareReactions()` - æ¯”è¾ƒååº”æ•°ç»„
- `getOverallReactionFeedback()` - è·å–ååº”æ•´ä½“åé¦ˆ

## ğŸ“Š å½“å‰é¢˜åº“ç»Ÿè®¡

- **æ€»é¢˜ç›®æ•°**ï¼š20 ä¸ª
- **åŒ…å«ç‰©è´¨ç±»å‹**ï¼š
  - é…¸ï¼šHCl, H2SO4, CH3COOH
  - ç¢±ï¼šNaOH, NH3, Ca(OH)2
  - ç›ï¼šNa2SO4, NaCl, CaCO3, CuSO4, AgNO3, NH4Cl, FeCl3, KMnO4
  - æ°§åŒ–ç‰©ï¼šFe2O3, Al2O3
  - æ°”ä½“ï¼šCO2, Cl2, SO2
  - å…¶ä»–ï¼šH2O2

## ğŸ”„ ä¸åŸé¡¹ç›®çš„å¯¹æ¯”

| åŸé¡¹ç›®ï¼ˆåŠ¨æ¼«è§’è‰²ï¼‰ | æ–°é¡¹ç›®ï¼ˆåŒ–å­¦ç‰©è´¨ï¼‰ |
|-------------------|-------------------|
| æ€§åˆ« | é…¸ç¢±æ€§ |
| çƒ­åº¦ | æ°´è§£/ç”µè§£ |
| ä½œå“æ•° | çŠ¶æ€ |
| æœ€é«˜åˆ† | ååº”ï¼ˆæ•°ç»„ï¼‰ |
| å…±åŒå‡ºæ¼” | å…¶ä»–æ€§è´¨ |
| Bangumi API | æœ¬åœ° JSON é¢˜åº“ |
| è§’è‰²å›¾ç‰‡ | åŒ–å­¦å¼æ–‡æœ¬ |

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®æ–°çš„åŒ–å­¦ç‰©è´¨é¢˜ç›®ï¼è¯·ç¡®ä¿ï¼š

1. éµå¾ª JSON æ ¼å¼è§„èŒƒ
2. ååº”æ ¼å¼ç»Ÿä¸€ï¼š"ä¸ X ååº”ç”Ÿæˆ Y"
3. æ ‡ç­¾æœ¯è¯­ä¸€è‡´ï¼ˆé¿å…åŒä¹‰è¯ï¼‰
4. æä¾›å‡†ç¡®çš„åŒ–å­¦ä¿¡æ¯

## ğŸ“„ è®¸å¯è¯

ç»§æ‰¿åŸé¡¹ç›®è®¸å¯è¯

## ğŸ™ è‡´è°¢

- åŸé¡¹ç›®ï¼š[anime-character-guessr](https://github.com/original-repo)
- çµæ„Ÿæ¥æºï¼šWordle ç±»çŒœæµ‹æ¸¸æˆ
- æ•°æ®æ¥æºï¼šé«˜ä¸­åŒ–å­¦æ•™æ

---

**ç¥ä½ æ¸¸æˆæ„‰å¿«ï¼ğŸ§ªâœ¨**

